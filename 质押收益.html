<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>空投计算器</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        h1 {
            color: #2d3748;
            font-size: 24px;
            margin-bottom: 25px;
            text-align: center;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        .result {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }
        .result h2 {
            color: #2d3748;
            font-size: 18px;
            margin-bottom: 15px;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-label {
            color: #4a5568;
        }
        .result-value {
            color: #2d3748;
            font-weight: 600;
        }
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background-color: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        .calculate-btn:hover {
            background-color: #38b2ac;
        }
        .calculation-process {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 6px;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.6;
            color: #4a5568;
        }
        .calculation-process h3 {
            color: #2d3748;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .clear-btn {
            width: 100%;
            padding: 14px;
            background-color: #f56565;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        .clear-btn:hover {
            background-color: #e53e3e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>空投收益计算器</h1>
        
        <div class="form-group">
            <label for="totalRewardCount">总奖励个数</label>
            <input type="number" id="totalRewardCount" placeholder="例如: 10000" step="0.01" required>
        </div>
        
        <div class="form-group">
            <label for="rewardValue">单个奖励价值 (USDT)</label>
            <input type="number" id="rewardValue" placeholder="例如: 1.5" step="0.0001" required>
        </div>
        
        <div class="form-group">
            <label for="totalLockupBGB">总锁仓量 (BGB)</label>
            <input type="number" id="totalLockupBGB" placeholder="例如: 1000000" step="0.01" required>
        </div>
        
        <div class="form-group">
            <label for="lockupDays">锁仓时长 (天)</label>
            <input type="number" id="lockupDays" placeholder="例如: 30" min="1" required>
        </div>
        
        <div class="form-group">
            <label for="personalLockupBGB">个人锁仓量 (BGB)</label>
            <input type="number" id="personalLockupBGB" placeholder="例如: 10000" step="0.01" required>
        </div>
        
        <button class="calculate-btn" onclick="calculateAirdrop()">计算空投收益</button>
        <button class="clear-btn" onclick="clearStorage()">清除保存的数据</button>
        
        <div class="result" id="result">
            <h2>计算结果</h2>
            <div class="result-item">
                <span class="result-label">总锁仓时长:</span>
                <span class="result-value" id="totalHours">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">每小时总空投个数:</span>
                <span class="result-value" id="hourlyTotalAirdrop">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">个人占比:</span>
                <span class="result-value" id="personalPercentage">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">个人每小时空投个数:</span>
                <span class="result-value" id="personalHourlyAirdrop">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">个人总空投个数:</span>
                <span class="result-value" id="personalTotalAirdrop">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">个人空投总价值 (USDT):</span>
                <span class="result-value" id="personalTotalValue">-</span>
            </div>
        </div>
        
        <div class="calculation-process" id="calculationProcess">
            <h3>计算过程</h3>
            <div id="processText"></div>
        </div>
    </div>

    <script>
        // 页面加载时读取本地存储的数据
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
        });

        // 从本地存储加载数据
        function loadSavedData() {
            const savedData = localStorage.getItem('airdropCalculatorData');
            if (savedData) {
                const data = JSON.parse(savedData);
                document.getElementById('totalRewardCount').value = data.totalRewardCount || '';
                document.getElementById('rewardValue').value = data.rewardValue || '';
                document.getElementById('totalLockupBGB').value = data.totalLockupBGB || '';
                document.getElementById('lockupDays').value = data.lockupDays || '';
                document.getElementById('personalLockupBGB').value = data.personalLockupBGB || '';
                
                // 如果有保存的数据，自动计算一次
                if (data.totalRewardCount && data.rewardValue && data.totalLockupBGB && data.lockupDays && data.personalLockupBGB) {
                    calculateAirdrop();
                }
            }
        }

        // 保存数据到本地存储
        function saveDataToLocalStorage() {
            const data = {
                totalRewardCount: document.getElementById('totalRewardCount').value,
                rewardValue: document.getElementById('rewardValue').value,
                totalLockupBGB: document.getElementById('totalLockupBGB').value,
                lockupDays: document.getElementById('lockupDays').value,
                personalLockupBGB: document.getElementById('personalLockupBGB').value
            };
            localStorage.setItem('airdropCalculatorData', JSON.stringify(data));
        }

        // 清除本地存储的数据
        function clearStorage() {
            if (confirm('确定要清除保存的数据吗？')) {
                localStorage.removeItem('airdropCalculatorData');
                // 清空输入框
                document.getElementById('totalRewardCount').value = '';
                document.getElementById('rewardValue').value = '';
                document.getElementById('totalLockupBGB').value = '';
                document.getElementById('lockupDays').value = '';
                document.getElementById('personalLockupBGB').value = '';
                // 重置结果
                document.getElementById('totalHours').textContent = '-';
                document.getElementById('hourlyTotalAirdrop').textContent = '-';
                document.getElementById('personalPercentage').textContent = '-';
                document.getElementById('personalHourlyAirdrop').textContent = '-';
                document.getElementById('personalTotalAirdrop').textContent = '-';
                document.getElementById('personalTotalValue').textContent = '-';
                document.getElementById('processText').textContent = '';
                alert('保存的数据已清除');
            }
        }

        function calculateAirdrop() {
            // 获取输入值
            const totalRewardCount = parseFloat(document.getElementById('totalRewardCount').value);
            const rewardValue = parseFloat(document.getElementById('rewardValue').value);
            const totalLockupBGB = parseFloat(document.getElementById('totalLockupBGB').value);
            const lockupDays = parseFloat(document.getElementById('lockupDays').value);
            const personalLockupBGB = parseFloat(document.getElementById('personalLockupBGB').value);
            
            // 验证输入
            if (isNaN(totalRewardCount) || isNaN(rewardValue) || isNaN(totalLockupBGB) || isNaN(lockupDays) || isNaN(personalLockupBGB)) {
                alert('请输入有效的数字');
                return;
            }
            
            if (totalLockupBGB === 0) {
                alert('总锁仓量不能为0');
                return;
            }

            // 保存数据到本地存储
            saveDataToLocalStorage();
            
            // 计算
            const totalHours = lockupDays * 24;
            const hourlyTotalAirdrop = totalRewardCount / totalHours;
            const personalPercentage = (personalLockupBGB / totalLockupBGB) * 100;
            const personalHourlyAirdrop = personalPercentage / 100 * hourlyTotalAirdrop;
            const personalTotalAirdrop = personalHourlyAirdrop * totalHours;
            const personalTotalValue = personalTotalAirdrop * rewardValue;
            
            // 显示结果
            document.getElementById('totalHours').textContent = totalHours.toFixed(0) + ' 小时';
            document.getElementById('hourlyTotalAirdrop').textContent = hourlyTotalAirdrop.toFixed(6);
            document.getElementById('personalPercentage').textContent = personalPercentage.toFixed(4) + '%';
            document.getElementById('personalHourlyAirdrop').textContent = personalHourlyAirdrop.toFixed(6);
            document.getElementById('personalTotalAirdrop').textContent = personalTotalAirdrop.toFixed(6);
            document.getElementById('personalTotalValue').textContent = personalTotalValue.toFixed(6);
            
            // 显示计算过程
            const processText = `
1. 总锁仓时长 = ${lockupDays} 天 × 24 = ${totalHours} 小时
2. 每小时总空投个数 = ${totalRewardCount} ÷ ${totalHours} = ${hourlyTotalAirdrop.toFixed(6)}
3. 个人占比 = ${personalLockupBGB} ÷ ${totalLockupBGB} × 100% = ${personalPercentage.toFixed(4)}%
4. 个人每小时空投个数 = ${hourlyTotalAirdrop.toFixed(6)} × ${personalPercentage.toFixed(4)}% = ${personalHourlyAirdrop.toFixed(6)}
5. 个人总空投个数 = ${personalHourlyAirdrop.toFixed(6)} × ${totalHours} = ${personalTotalAirdrop.toFixed(6)}
6. 个人空投总价值 = ${personalTotalAirdrop.toFixed(6)} × ${rewardValue} USDT = ${personalTotalValue.toFixed(6)} USDT
            `;
            document.getElementById('processText').textContent = processText;
        }
    </script>
</body>
</html>